<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SEO Audit Tool</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-50 min-h-screen flex items-center justify-center">

<div class="bg-white p-8 rounded-xl shadow-md w-full max-w-md">
  <h1 class="text-2xl font-bold text-center mb-4">SEO Audit</h1>

  <form id="auditForm" class="space-y-4">
    <input name="userName" required placeholder="Your Name" class="w-full border p-2 rounded"/>
    <input name="userEmail" type="email" required placeholder="Your Email" class="w-full border p-2 rounded"/>
    <input name="websiteUrl" type="url" required placeholder="https://example.com" class="w-full border p-2 rounded"/>
    <button id="submitBtn" class="w-full bg-blue-600 text-white py-2 rounded">
      Generate Audit
    </button>
  </form>

  <p id="loading" class="hidden text-center mt-4 text-blue-600">
    Generating PDF...
  </p>
</div>

<script>
const form = document.getElementById("auditForm");
const loading = document.getElementById("loading");

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  loading.classList.remove("hidden");

  const res = await fetch("/generate-audit", {
    method: "POST",
    body: new FormData(form)
  });

  const blob = await res.blob();
  const url = URL.createObjectURL(blob);
  window.open(url, "_blank");

  loading.classList.add("hidden");
});
</script>

</body>
</html>
